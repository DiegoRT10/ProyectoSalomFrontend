<div class="main">
  <div class="section text-center">
    <div class="container">


      <div class="row">
        <div class="col-md-12 ml-auto mr-auto">
            <app-loading *ngIf="carga"></app-loading>
        </div>
    </div>






      <div class="row">

        <div class="col-md-8 ml-auto mr-auto">
          <h1 *ngIf="!bandera" class="title">Nota de Traslado</h1>
          <h1 *ngIf="bandera" class="title">Detalle Nota de Traslado</h1>
          <br>
        </div>

        <div class="col-md-12">
          <form *ngIf="!bandera">
            <div class="mb-3">
              <label class="form-label">Fecha</label>
              <input  type="date" class="form-control"  [(ngModel)]="ObjectNotaTraslado.fecha" name="fecha">
            </div>
            <div class="mb-3">
              <label for="typeahead-focus">Origen</label>

              <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="ObjectNotaTraslado.id_location_origen" [ngbTypeahead]="search2"
                (focus)="focus2$.next($any($event).target.value)" (click)="click2$.next($any($event).target.value)" 
                #instance2="ngbTypeahead" name="id_location_origen" />
            </div>
            <div class="mb-3">
              <label for="typeahead-focus">Destino</label>
              <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="ObjectNotaTraslado.id_location_destino" (ngModelChange)="ActualizaInputRecibe()" [ngbTypeahead]="search3"
                (focus)="focus3$.next($any($event).target.value)" (click)="click3$.next($any($event).target.value)"
                #instance3="ngbTypeahead" name="id_location_destino" />
            </div>
            <div class="mb-3">
              <label class="form-label">Motivo</label>
              <input type="text" class="form-control"  [(ngModel)]="ObjectNotaTraslado.motivo"  name="motivo">
            </div>

            <div  class="mb-3">
              <label class="form-label">Entrega</label>
              <input  type="text" class="form-control"  [(ngModel)]="ObjectNotaTraslado.id_entrega" name="id_entrega">
            </div>
            <div  class="mb-3">
              <label for="typeahead-focus">Recibe</label>
              <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="ObjectNotaTraslado.id_recibe"  [ngbTypeahead]="search4"
                (focus)="focus4$.next($any($event).target.value)" (click)="click4$.next($any($event).target.value)"
                #instance4="ngbTypeahead" name="id_recibe" />
            </div>
            <div  class="mb-3">
              <label for="typeahead-focus">Encargado Traslado</label>
              <input type="text" class="form-control" [(ngModel)]="ObjectNotaTraslado.id_encargado" name="id_encargado"/>
            </div>
            <div  class="mb-3">
              <label for="typeahead-focus">Autorizado por</label>
              <input type="text" class="form-control" [(ngModel)]="ObjectNotaTraslado.id_autorizado" name="id_autorizado" />
            </div>

          </form>
          <button *ngIf="!bandera" type="button" class="btn btn-outline-primary float-left"  (click)="AgregarNotaTraslado()" > Guardar </button>
          <button *ngIf="bandera" type="button" class="btn btn-outline-primary float-left" data-toggle="modal" data-target="#exampleModalLong" > Agregar </button>

          <table *ngIf="bandera" class="table">
            <thead>
              <tr>
                <th scope="col">Codigo</th>
                <th scope="col">Producto</th>
                <th scope="col">Cantidad</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of ListaProductsViewProducts; let i = index">


                <th>{{item.code}}</th>
                <th>{{item.nombre}}</th>
                <th>{{ObjectMovimientos.cantidad}}</th>
              </tr>
            </tbody>
          </table>

         

        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade " id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Agregar producto a enviar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" >
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            
            <div class="modal-body">


              <form>

                <div class="mb-3">
                  <label for="typeahead-focus">Buscar producto a enviar</label>
                  <input id="typeahead-focus" type="text" class="form-control" [(ngModel)]="model" [ngbTypeahead]="search"
                    (focus)="focus$.next($any($event).target.value)" (click)="click$.next($any($event).target.value)"
                    #instance="ngbTypeahead" name="model" />
                </div>
    
    
                <div class="mb-3">
                  <label class="form-label">Cantidad de producto</label>
                  <input [(ngModel)]="ObjectMovimientos.cantidad" type="number" class="form-control" required="[0-9]"
                    name="cantidad">
                </div>
    
                <div class="mb-3">
                  <button type="button" class="btn btn-success" data-dismiss="modal" (click)="MoverProducto()">Guardar</button>
                </div>
    
    
              </form>


            </div>
            <!-- <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="button" class="btn btn-primary">Save changes</button>
                                                         </div> -->
        </div>
    </div>
</div>
